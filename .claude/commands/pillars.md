# /pillars - Generate Design Pillar Structure

You are Opus, creating the design pillar structure for a game project.

## Model

**MANDATORY: opus** - Design pillar structure requires understanding game type and comprehensive design needs.

## Language

Read `.skgd/config.yaml` → `user.language`
Use `.skgd/i18n/messages.yaml` for user-facing text.

## Prerequisites

Check `docs/game-brief.md` exists.
- **IF NOT** → Inform user: "Run /brainstorm first to create the game vision."

---

## Step 1: Load Context

Read:
- `docs/game-brief.md` - Game vision, type, core experience
- `.claude/data/game-types.md` - Pillar mapping reference

---

## Step 2: Detect Game Type

From `docs/game-brief.md`, identify:

1. **Explicit type** from `## Game Type` section
2. **OR infer from:**
   - Keywords in description
   - Core mechanics mentioned
   - Reference games cited

**Supported Types:**
- Roguelike/Roguelite
- Action Platformer
- Metroidvania
- RPG
- Action RPG
- Turn-Based Tactics
- Puzzle
- Survival
- Horror
- Simulation
- Visual Novel
- Fighting
- Racing
- Card Game/Deckbuilder
- Tower Defense

If unclear, ASK the user:
```
I detected elements of [type1] and [type2]. Which fits better?
Or tell me the primary type.
```

---

## Step 3: Map Pillars

Using `.claude/data/game-types.md`, identify:

1. **Core Pillars** (always generated):
   - `_index.md` - Overview and status
   - `game-loop.md` - Core gameplay cycle
   - `player-experience.md` - Target emotions
   - `art-direction.md` - Visual style

2. **Type-Specific Pillars** based on detected game type

3. **Optional Pillars** to offer the user

---

## Step 4: Create Pillar Structure

Create `docs/pillars/` directory with:

### _index.md (Overview)

```markdown
# [Game Name] - Design Pillars

*Game Type: [Detected Type]*
*Created: [timestamp]*

## Overview

Design pillars capture the key design decisions for your game.
Each pillar is a stub with questions - use `/deep-dive [pillar]` to develop.

## Pillar Status

### Core (Required)
| Pillar | Status | Priority |
|--------|--------|----------|
| game-loop | ⬜ Stub | P1 |
| player-experience | ⬜ Stub | P1 |
| art-direction | ⬜ Stub | P2 |

### Gameplay
| Pillar | Status | Priority |
|--------|--------|----------|
| [type-specific-1] | ⬜ Stub | P1 |
| [type-specific-2] | ⬜ Stub | P2 |

### Content
| Pillar | Status | Priority |
|--------|--------|----------|
| [content-pillar-1] | ⬜ Stub | P2 |

### Optional (Not Generated)
- [optional-1] - Add with `/deep-dive [name]`
- [optional-2]

## Recommended Order

Based on your game type ([type]), develop pillars in this order:

1. **game-loop** - Foundation of everything
2. **[primary-mechanic]** - Core differentiator
3. **player-experience** - Validate the feeling
4. **[content-pillar]** - What players encounter
5. **art-direction** - Visual identity

## Commands

- `/deep-dive [pillar]` - Develop a pillar in depth
- `/validate-design` - Check coherence across pillars
- `/brainstorm` - Spark mode for fresh ideas

---
*Generated by /pillars*
*Next: /deep-dive game-loop*
```

### Individual Pillar Stubs

For each pillar, create `docs/pillars/[pillar-name].md`:

```markdown
# [Pillar Name] - [Game Name]

*Status: ⬜ STUB*
*Priority: [P1/P2/P3]*

## Connection to Vision

> [Quote relevant section from game-brief.md]

How this pillar serves the game's core:
- [Connection point 1]
- [Connection point 2]

---

## Key Questions

Answer these during `/deep-dive`:

### [Category 1]
- [ ] [Question 1]?
- [ ] [Question 2]?
- [ ] [Question 3]?

### [Category 2]
- [ ] [Question 4]?
- [ ] [Question 5]?

### [Category 3]
- [ ] [Question 6]?
- [ ] [Question 7]?

---

## Design Space

*[Empty - filled during /deep-dive]*

---

## References

*[Empty - filled during /deep-dive]*

---

## Dependencies

**Requires:** [pillar] to inform decisions
**Impacts:** [pillar], [pillar]

---

*Complete with: `/deep-dive [pillar-name]`*
```

---

## Step 5: Generate Type-Specific Questions

Each pillar type has specific questions:

### game-loop.md Questions
- What is the core action loop (30 seconds)?
- What is the session loop (30-60 minutes)?
- What is the meta loop (across sessions)?
- What creates "one more turn" compulsion?
- When does a session end? How does the player feel?

### combat-system.md Questions (if applicable)
- Real-time or turn-based?
- What makes combat feel unique?
- How do different characters/weapons play differently?
- What's the skill expression ceiling?
- How does difficulty scale?

### progression.md Questions (if applicable)
- What progression systems exist?
- How long to meaningful first unlock?
- What's the power curve shape?
- How does progression reinforce the core loop?

### level-design.md Questions (if applicable)
- Linear, branching, or open?
- How are levels structured?
- What environmental mechanics exist?
- How does difficulty progress through levels?

### enemy-design.md Questions (if applicable)
- What enemy archetypes exist?
- How do enemies create tactical puzzles?
- How does enemy variety introduce across the game?
- What makes encounters memorable?

### art-direction.md Questions
- What's the overall visual style?
- What mood/atmosphere are we targeting?
- How do we visually differentiate key elements?
- What are our reference touchstones?

### player-experience.md Questions
- What emotions should players feel?
- What power fantasy are we fulfilling?
- What's the ideal "story" a player tells after a session?
- How do we create memorable moments?

---

## Step 6: Update State

Update `.skgd/state.yaml`:
```yaml
concept:
  pillars_done: true
  game_type: [detected type]
  pillar_count: [number]
```

---

## Step 7: Git Commit

```bash
git add docs/pillars/
git commit -m "docs: create design pillar structure

Game type: [type]
Pillars: [count] stubs generated
Next: /deep-dive game-loop"
```

---

## Step 8: Summary

```
Design pillars created: docs/pillars/

Game Type: [detected]

Generated Pillars:
  Core:
    ⬜ game-loop (P1)
    ⬜ player-experience (P1)
    ⬜ art-direction (P2)

  Gameplay:
    ⬜ [type-specific-1] (P1)
    ⬜ [type-specific-2] (P2)

  Content:
    ⬜ [content-1] (P2)
    ⬜ [content-2] (P3)

Recommended development order:
  1. game-loop → 2. [primary] → 3. player-experience

Next steps:
  /deep-dive game-loop - Start developing the core
  /deep-dive [pillar]  - Jump to specific pillar
```

---

## Remember

- **Stubs, not essays** - Questions only, answers come from /deep-dive
- **Type-aware** - Different games need different pillars
- **Ordered** - Suggest logical development sequence
- **Connected** - Show dependencies between pillars
